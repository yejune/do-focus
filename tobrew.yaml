name: godo
language: go
description: CLI installer for Do - Claude Code project environment
homepage: https://github.com/yejune/do-focus
license: MIT
github:
    user: yejune
    repo: do-focus
    tap_repo: homebrew-tap
build:
    command: |
        go build -ldflags "-X main.version={{.Version}}" -o build/godo ./cmd/godo/
        cd .do/worker && go build -ldflags "-X main.version={{.Version}}" -o ../../build/godo-worker ./cmd/worker/
assets:
    - build/godo
    - build/godo-worker
formula:
    install: |-
        system "go", "build", "-ldflags", "-X main.version=#{version}", "-o", "godo", "./cmd/godo/"
        Dir.chdir(".do/worker") do
          system "go", "build", "-ldflags", "-X main.version=#{version}", "-o", "../../godo-worker", "./cmd/worker/"
        end
        bin.install "godo"
        bin.install "godo-worker"
    test: assert_match "godo version", shell_output("#{bin}/godo version")
    caveats: |-
        godo has been installed!

        Usage:
          cd my-project
          godo sync             # Install or update Do
          godo worker start     # Start memory worker
